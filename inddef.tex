\documentclass[11pt,a4paper]{ltjsarticle} % lualatex
%
\usepackage{fontspec}
%
\usepackage{amsmath,amssymb} % 数式用
\usepackage{amsthm} % 定理環境
\usepackage{braket} % カッコ
\usepackage{prettyref} % 相互参照
%
%%%%======prettyref===========%%%%%%%%%
%
\newrefformat{eq}{式{\eqref{#1}}}
\newrefformat{thm}{定理{\ref{#1}}}
\newrefformat{ex}{例{\ref{#1}}}
\newrefformat{lemma}{補題{\ref{#1}}}
\newrefformat{que}{問{\ref{#1}}}
%
%%%%%%======biblatex=============%%%%%%%%%%
%
\usepackage[% 
backend=biber,
url=true,
doi=false,
eprint=false,
isbn=true,
style=phys
]{biblatex} % use "biblatex"
\DeclareSortingTemplate{mysorting}{
  \sort{\citeorder}
  \sort{\field{sotname} \field{author} \field{translator} \field{editor}}
  \sort{\field{year}}
  \sort{\field{title}}
}
%
\DeclareFieldFormat[article]{journaltitle}{\mkbibemph{#1}}
\DeclareFieldFormat[book]{title}{\mkbibacro{#1}}
\ExecuteBibliographyOptions{sorting=mysorting}
%
\addbibresource{bib/youryou.bib}
%
%%%%%%%%%%%%%%========hyperref============%%%%%%%%%%
%
\usepackage[unicode]{hyperref} % hyperlink
\hypersetup{% setting hyperref
  bookmarksnumbered=true,
  bookmarksopen=true,
  bookmarkstype=toc,
  pdfborder={0 0 0},
  colorlinks=true
}
%
%%%%%%==========定理環境のカスタマイズ===============%%%%%%%%%
%
\newtheoremstyle{mystyle} % 定理環境のスタイルを作成
{} % space above
{} % space below
{\normalfont} % body font 
{} % indent amount
{\bfseries} % theorem head font
{} % punctuation after theorem head
{10pt} % space after theorem head
{\thmname{#1}\thmnumber{#2}\thmnote{\textbf{\hspace{1pt}（#3）}}} % theorem head spec
\theoremstyle{mystyle} % 作成したスタイルを使用
%
\newtheorem{thm}{定理} % \begin{thm} で定理を書く
\newtheorem{lemma}{補題} % \begin{lemma} で補題
\newtheorem*{coro}{系}  % \begin{coro} で系
\newtheorem{que}{問} % \begin{que} で問
\newtheorem*{ans}{［解答］} % \begin{ans} で解答
\newtheorem*{ans2}{［別解］} % \begin{ans2} で別解
%
%
%%%%%================proof環境のカスタマイズ========================%%%%%%%%%%%
\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
  \pushQED{\qed}%
  \normalfont \topsep6\p@\@plus6\p@\relax
  \trivlist
\item[\hskip\labelsep
  \itshape
  %    #1\@addpunct{.}]\ignorespaces% DELETED
  #1]\ignorespaces% ADDED
  }{%
  \popQED\endtrivlist\@endpefalse
}
\makeatother
%                       ドットが消える
\renewcommand{\proofname}{\textbf{［証明］}}
%
\renewcommand{\labelenumi}{(\arabic{enumi})}
%
%%%%%%%%%%%%==========タイトル===============%%%%%
\title{漸化式の解を推測するアレがアレな件}
\author{NOGUTAKU Lab}
\date{\today}
\begin{document}
%
\maketitle

本稿を読む上で，以下の点に注意していただきたい．
\begin{itemize}
  \item 本稿では，0を自然数に含めるとする．
    そのため，引用されている問題や解答が引用元とは
    若干異なるものになっていることがある．
    これは，自然数に0を含める立場と含めない立場が
    混在してしまったときに生じる混乱を避けるためである．
    また，自然数全体の集合と実数全体の集合をそれぞれ
    $\mathbb{N}, \mathbb{R}$と表す．
  \item 集合と写像に関する基本的な知識は既知とし，
    なんら解説なく用いることにする．
    前半部分は集合や写像に関する知識がなくても
    高校の数学Bレベルの知識があれば読めないこともないが，
    後半部分はほとんど無理だろうと思われる．
  \item 数学的帰納法のことをしばしば帰納法と略記する．
  \item 数列を，$\mathbb{N}$から$\mathbb{R}$への写像と定義して議論を進める．
  \item 集合$X,Y$に対し，$X$から$Y$への写像全体の集合を$Y^X$と表す．
  \item 写像$f \colon X \longrightarrow Y$と$A \subset X$に対し，
    $f|_A$は$f$の始集合を$A$に制限したものを表す．
  \item 整列集合$(W, \leq)$と$x \in W$に対し，$W$の部分集合
    $\Set{ w \in W \mid w < x}$を$W \langle x \rangle$と表す．
    ひとまずは$n \in \mathbb{N}$に対し，
    $\mathbb{N} \langle n \rangle = \Set{ 0, 1, \ldots, n-1}$
    であることさえわかっていれば問題ない．
\end{itemize}
%

\section{「推測して帰納法」の問題点}

漸化式によって帰納的に定義された数列の一般項を求める
という問題は，大学受験レベルの問題でよくあるものである．
その中で，「一般項を推測して帰納法で示す」というものがあった．
高校の数学Bの教科書\cite{kyoukasyo}を見てみると，次のような問題が記載されている．

\begin{que} \label{que:suisoku}
  次の条件によって定められる数列$\{ a_n \}$がある．
  \begin{align*}
    a_0 & = 2 , \\
    a_{n+1} & = 2- \frac{2}{a_n} \quad ( n = 0,1, \ldots).
  \end{align*}
  \begin{enumerate}
    \item $a_1,a_2,a_3$を求めよ．
    \item 第$n$項$a_n$を推測して，それを数学的帰納法を用いて証明せよ．
  \end{enumerate}
\end{que}

教科書ではこの問題は演習問題として載せられているため，
詳細な解答は見られない．そこで，
出版社が同じであり，かつ
大学受験用参考書として定評のある\cite{chert}中の
類似した問題を見てみる．
\begin{que} \label{que:suisokuchert}
  \begin{align}
    \begin{aligned}
      a_0 & = 1, \\
      a_{n+1} & = \frac{a_n}{1 + 3 a_n} \quad ( n = 0,1,\ldots )
    \end{aligned}
    \label{eq:zenkasiki}
  \end{align}
  で定められる数列$\{ a_n \}$について，
  \begin{enumerate}
    \item $a_1,a_2,a_3$を求めよ．
    \item $a_n$を$n$で表す式を推測し，それを数学的帰納法で証明せよ．
  \end{enumerate}
\end{que}

この問題には詳細な解答が載せられている．

\begin{ans}
  $a_1=1/4, \, a_2 = 1/7 , \, a_3 = 1/10$だから，
  $a_n = 1/(3n+1) \ (n \in \mathbb{N})$と推測される．
  これを帰納法によって示す．
  $a_0 = 1, \, 1/(3 \cdot 0+1)=1$より
  $a_0 = 1/ (3 \cdot 0 +1 )$である．
  $a_k= 1/(3k+1)$が成り立つと仮定すると，
  \begin{align*}
    a_{k+1} & = \frac{a_k}{1+3a_k} \\
            & = \frac{ \dfrac{1}{3k+1} }{ 1 + 3 \dfrac{1}{3k+1} } \\
            & = \frac{1}{3k+4}
  \end{align*}
  となる．ゆえにすべての自然数$n$に対して$a_n=1/(3n+1)$となる．
\end{ans}

この解答は，いわゆる受験業界では非常によく知られたものである．
また，「数学的帰納法で」という文言を無視すれば，
別解として次のようなものがあることも見逃せない．

\begin{ans2}
  $a_1 = 1/4 , \, a_2 = 1/7 , \, a_3 = 1/10$であるから，
  $a_n = 1/(3n+1) \ (n \in \mathbb{N})$と推測できる．
  実際，$a_n = 1/(3n+1) \ (n \in \mathbb{N})$とすると，
  この数列$\{ a_n \}$は，$a_0 = 1/(3 \cdot 0 + 1)=1$を
  満たし，さらに各$n \in \mathbb{N}$に対して
  \begin{align*}
    \frac{a_n}{1+ 3 a_n} & = 
    \frac{ \dfrac{1}{3n+1} }{ 1+ 3 \dfrac{1}{3n+1} } \\
    & = \frac{1}{3n+4} \\
    & = a_{n+1}
  \end{align*}
  を満たす．
\end{ans2}


 
まず［別解］に関してだが，明確に穴があるように思われる．
それは，「数列$\{ 1/(3n+1) \}$以外に\prettyref{eq:zenkasiki}を
満たす数列が存在するかどうか」がまったく検討されていない点である．
このギャップを埋めるには，［別解］に続けて\prettyref{eq:zenkasiki}を
満たす任意の数列$\{ a_n \}$が$\{ 1/(3n+1) \}$に等しいことを示せばよい．
すなわち，\prettyref{eq:zenkasiki}を満たす任意の数列$\{a_n \}$に対し，
すべての自然数$n$に対して$a_n = 1/(3n+1)$が成り立つことを示せばよい．
帰納法によるのが普通だろう．
この証明はすでに述べられたような気がしなくもない．
実際に書いてみればわかると思うが，これは
\emph{［解答］で述べた証明とまったく同じである．}

［解答］と［別解］で何をやったのかを整理しよう．
［解答］では，「\prettyref{eq:zenkasiki}を満たす数列$\{ a_n \}$を
任意にとったとき，すべての自然数$n$に対して$a_n = 1/(3n+1)$が成り立つ」
ことを帰納法によって示している．
このことからわかるのは，「\prettyref{eq:zenkasiki}を満たす数列$\{ a_n \}$で，
数列$\{ 1/(3n+1) \}$と等しくないものは存在しない」ということである．
つまり，［解答］では\prettyref{eq:zenkasiki}を満たす数列が
たかだか1つであるということを示しているのである．
［別解］では，「数列$\{ 1/(3n+1) \}$が\prettyref{eq:zenkasiki}を満たすこと」
を示している．すなわち，［別解］では
「\prettyref{eq:zenkasiki}」を満たす数列が存在することを示しているのである．

従って，\prettyref{eq:zenkasiki}を満たす数列が数列$\{ 1/(3n+1) \}$
\emph{のみである}ことを示すためには，［解答］と［別解］の
両方の記述を合わせなくてはならず，
どちらも問題の解答としては不十分なのである
\footnote{
  すぐ後にこの言説には致命的な欠陥が存在することを述べる．
}
．


\section{何が問題なのか}
「推測して帰納法」という解法の問題点を述べたが，この言説には致命的な欠陥が存在する．
それは，実は，［解答］の中で「数列$\{ 1/(3n+1) \}$が\prettyref{eq:zenkasiki}を
満たすこと」とほぼ同じことが示されているのである．

［解答］の中で，$1/(3 \cdot 0 + 1) =1$であり，
$a_k = 1/(3k+1)$と仮定すると$a_{k+1} = 1/(3k+4)$
となることが示されているが，これはまさに「数列$\{ 1/(3n+1) \}$が
\prettyref{eq:zenkasiki}を満たすこと」の証明にほかならない．
となると，［解答］は\prettyref{eq:zenkasiki}を満たす数列の
存在と一意性を同時に示しているのだと解釈できることとなる．

このことを根拠に，［解答］は問題への解答として
完全なものであると主張するのは，
至極まっとうなものであるように思われる．
しかし筆者が問題視しているのはそこではなく，
あたかも「帰納法によって推測が正しいことが示された」
かのように認識されていることである．

［解答］においては\prettyref{eq:zenkasiki}を満たす
数列の存在と一意性を示していたが，
帰納法を用いたのは一意性の証明のみであったことに
注意しなければならない．
また，\prettyref{que:suisoku}や\prettyref{que:suisokuchert}の
問題文には「推測が正しいことを帰納法で証明せよ」などとは書かれておらず，
「それを帰納法で証明せよ」と書かれているのみである．
しかし，この「それ」が指す文言が「推測が正しいこと」
であることは疑いようもない．
そして「推測が正しいこと」が何を指すかを考えると，
\prettyref{que:suisokuchert}でいえば
「$a_0 = 1, \, a_1 = 1/4, \, a_2 = 1/7, \, a_3 = 1/10$から
$a_n = 1/(3n+1)$と結論したが，$a_n = 1/(3n+1)$は本当に任意の自然数$n$に対して
\prettyref{eq:zenkasiki}を満たすのかを検証すること」である．
これは推測が間違っていたときのことを考えるとわかりやすい．
例えば，$a_0 = 0, \, a_{n+1} = a_n + 1 \ (n \in \mathbb{N})$を満たす
数列$\{ a_n \}$について，$a_1=1, \, a_2 = 2, \, a_3 = 3 $であるが，
このことから$a_n = n + n(n-1)(n-2)(n-3)$と推測したとすると，
この推測は間違いである．実際，$n=4$のとき，漸化式からは$a_4 = a_3 + 1 = 4$
となるが，$4 + 4(4-1)(4-2)(4-3) = 28$となり，$n=4$のときには
$a_n = n + n(n-1)(n-2)(n-3)$は漸化式を満たさない．


\prettyref{eq:zenkasiki}のような漸化式を満たす数列を考えるとき，
のちに\prettyref{thm:inddef}で示すように，
漸化式を満たすような数列が一意に存在することが知られている．
漸化式に関する問題が軒並み
「次の条件を満たす数列をすべて求めよ」ではなく
「次の条件によって定義される数列の一般項を求めよ」
と書かれているのはそのためである．
このことを「暗黙の了解」とするならば，
［別解］も問題の解答として完全なものになる．
そこで，\cite{chert}から少し違うタイプの問題を挙げてみる．

\begin{que} \label{que:suisokuchert2}
  数列$\{ a_n \}$（ただし$a_0 = 0$でほかの項はすべて正）について次の関係式が
  成り立つとき，一般項$a_n$を推測し，
  その推測が正しいことを証明せよ．
  \begin{align}
    ( a_1 + a_2 + \cdots + a_n )^2 =
    {a_1} ^3 + {a_2} ^3 + \cdots + {a_n } ^3 .
    \label{eq:suisoku2}
  \end{align}
\end{que}

\begin{ans}
  $a_n = n \ (n \in \mathbb{N})$が\prettyref{eq:suisoku2}を満たすことはすぐにわかる．
  あとはほかに文中の条件を満たす数列が存在しないことを
  示せばよいが，これは帰納法によって示せる．概略を述べておこう．
  文中の条件を満たす任意の数列$\{ a_n \}$について，
  $a_0 = 0$である．
  $a_0=0, \, a_1=1, \, \ldots, a_k = k$と仮定すると，
  \begin{align*}
    (1+2+ \cdots + k + a_{k+1})^2 & = 1^3 + 2^3 + \cdots + k^3 + {a_{k+1}} ^3, \\
    a_{k+1}(a_{k+1} + k) (a_{k+1} - k - 1) & = 0.
  \end{align*}
    ゆえに$a_{k+1} > 0$だから$a_{k+1} = k+1$となる．
    従って，文中の条件を満たす数列$\{ a_n \}$が\emph{存在すれば}，
    その数列$\{ a_n \}$は任意の自然数$n$に対して$a_n = n$を満たす
    \footnote{
      もし仮に文中の条件を満たす数列が存在しなかった場合，
      「その数列$\{ a_n \}$は任意の・・・」
      の部分を$1=2$などに置き換えても「・・・が存在すれば，・・・」
      自体は正しい主張であることを思い出してほしい．
    }
    ．
\end{ans}

\prettyref{que:suisokuchert2}の解答では，文中の条件を満たす数列の一意性を
帰納法で示すとき，その中に「数列$\{ n \}$が条件を満たすこと」
の証明は見受けられない．また，文中の条件を満たす数列が存在するかどうかは，
漸化式を満たす数列の存在と一意性を暗黙の了解としたとしても
決して明らかであるとはいえない．従って，文中の条件を満たす
数列の存在と一意性は別個に示されなければならないが，
\cite{chert}では一意性の方しか示していない．
\prettyref{que:suisokuchert2}は，
「推測して帰納法」なる解法の問題点を明確に指摘する1つの例となっている．



\section{指導要領はどうなっているか}
教科書や参考書が間違っているというのはよくあることである．
特に，高校生向けの参考書で間違いがあるなどということは，
ことさらに騒ぎ立てるようなことでもない．
教科書が間違いがあるというのは，
参考書に間違いがあるということに比べれば
被害は大きいが，間違っていないのが当たり前とみなすのは無理がある．
しかし，法的拘束力をもった学習指導要領がそれでは困る．
幸い，というより当たり前だが
現行の学習指導要領\cite{youryou}には「推測して帰納法」
なる解法を支持する記述はない．
教育課程の大綱的基準を定めた学習指導要領にそのような
具体的な記述があるはずがないからである．
しかし，学習指導要領解説\cite{youryoukai}には次のように示されている．

\begin{quote}
  漸化式を用いて表される数列の一般項を推測し，
  数学的帰納法を用いてその推測が正しいことを証明することも考えられる。
  例えば，$a_{n+1} = 3 a_n + 2 , \, a_1=1$で表される数列の一般項を
  $2 \times 3^{n-1} -1 $と推測して証明することなどを扱う。
\end{quote}

明らかに「推測して帰納法」を取り上げさせる意図が見えている．
幸い，\cite{youryoukai}には法的拘束力は存在せず，
高校や塾，予備校で指導を行う教師・講師はこれに従う必要はない．
しかし，このことを明確に理解している指導者はそれほど多くはないと考えられるため，
この誤解がまた次の世代まで引き継がれてしまう可能性は高い．

この誤解を解くためには，学習者に「このことから何がいえたのか」を
明確に自覚させる必要がある．
学習者が誤解するのは仕方ないとしても，
教科書や参考書を執筆する，あるいは数学を指導する側の人間が
数学の内容に関して誤解しているというのは容認しがたい事態である．

本稿をきっかけに，そのような誤解が少しでも解ければ幸いである．


\section{帰納的定義について}

漸化式により数列が帰納的に定義できることは，
主張自体はよく見かけるものであるが，その証明は
ちょっとググった程度では出てきてはくれない．
もちろんちゃんとした本を見れば載っているのだが，
せっかくの機会なのでここで定式化して証明まで済ませてしまおう．

\begin{thm} \label{thm:inddef}
  空でない集合$X$と写像$G \colon \bigcup_{n \in \mathbb{N} } 
  X^{\mathbb{N} \langle n \rangle} \longrightarrow X$
  が与えられたとする．
  このとき，$x_0 \in X$を1つ定めるごとに，
  写像$f \colon \mathbb{N} \longrightarrow X$で
  \begin{align}
    \begin{aligned}
      f(0) & = x_0 , \\
      f(n) & = G \left( f|_{\mathbb{N} \langle n \rangle} \right)
      \quad ( n \in \mathbb{N} - \Set{0} )
    \end{aligned}
    \label{eq:inddef}
  \end{align}
  を満たすものが一意に定まる．
\end{thm}

\begin{proof}
  先に一意性の方から示しておこう．
  写像$f,g \colon \mathbb{N} \longrightarrow X$で
  \prettyref{eq:inddef}を満たすようなものを任意にとり，
  すべての$n \in \mathbb{N}$に対して$f(n) = g(n)$が成り立つことを
  帰納法で示す．
  $f(0) = x_0 = g(0)$より$f(0)=g(0)$である．
  各$n \in \mathbb{N}$に対し，$i= 0,1, \ldots, n$に対して
  $f(i)=g(i)$であるとすると，
  $f|_{\mathbb{N} \langle n+1 \rangle} = g|_{\mathbb{N} \langle n+1 \rangle} $
  だから$f(n+1) = G \left( f|_{\mathbb{N} \langle n+1 \rangle} \right) =
  G \left ( g |_{\mathbb{N} \langle n+1 \rangle} \right) = g(n+1)$
  より$f(n+1) =g(n+1)$となる．
  ゆえにすべての$n \in \mathbb{N}$に対して$f(n) = g(n)$となり，
  $f=g$を得る．

  \prettyref{eq:inddef}を満たす写像の存在を示そう．
  自然数$n$の条件$P(n)$を
  「写像$f \colon \mathbb{N} \langle n \rangle \longrightarrow X$で
  すべての$m \in \mathbb{N} \langle n \rangle$に対して
  $f(m) = G \left( f|_{\mathbb{N} \langle m \rangle } \right)$
  を満たすものが存在する」と定める．
  一意性の証明とまったく同様にして，
  各$n \in \mathbb{N}$に対して$P(n)$を成り立たせるような写像$f$は
  たかだか1つであることが示される．その写像を$f_n$と表記する．
  すべての自然数$n$に対して$P(n)$が成り立つことを帰納法によって示そう．
  $\mathbb{N} \langle 0 \rangle = \varnothing$だから，
  $P(0)$を成り立たせるような写像$f$として空写像がとれる．従って$P(0)$は成り立つ．
  各$n \in \mathbb{N}$に対し，$i=0,1,\ldots,n$に対して
  $P(i)$が成り立つと仮定する．
  いま，写像$f \colon \mathbb{N} \langle n+1 \rangle \longrightarrow X$を
  \begin{align*}
    f (m) = 
    \begin{cases}
      G \left( f_{m} \right) & ( \text{$m=n$のとき} ) , \\
      f_{m+1} (m) & (\text{それ以外のとき})
    \end{cases}
  \end{align*}
  と定めると，この$f$はすべての$m \in \mathbb{N} \langle n+1 \rangle$
  に対して$f(m) = G \left( f|_{\mathbb{N} \langle m \rangle} \right)$
  を満たす．ゆえに$P(n+1)$も成り立つから，
  すべての自然数$n$に対して$P(n)$が成り立つ．
  そこで，写像$f \colon \mathbb{N} \longrightarrow X$を
  \begin{align*}
    f(0) & = x_0 , \\ 
    f(n) & = f_{n+1} (n) \quad ( n \in \mathbb{N} - \Set{0})
  \end{align*}
  と定めると，この$f$は\prettyref{eq:inddef}を満たす．
\end{proof}


\prettyref{thm:inddef}は一般の整列集合上の帰納的定義に容易に拡張できる．
証明には数学的帰納法を整列集合上に拡張した超限帰納法を用いればよい．
また，\prettyref{thm:inddef}においては，隣接2項間の漸化式に
関してしか言及できてはいないが，隣接3項間，4項間といった漸化式においても
同様であることは明らかであろう．

%
\printbibliography[title=参考文献]
\end{document}
